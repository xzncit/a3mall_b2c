(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/goods/view"],{"0d60":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=i(n("c368"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){n.e("components/sku-action/sku-action").then(function(){return resolve(n("06f7"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/goods-action/goods-action").then(function(){return resolve(n("3452"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/goods-action/goods-action-button").then(function(){return resolve(n("e48f"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/goods-action/goods-action-icon").then(function(){return resolve(n("9119"))}.bind(null,n)).catch(n.oe)},d=function(){Promise.all([n.e("common/vendor"),n.e("components/share/index")]).then(function(){return resolve(n("57ff"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/tool/loading").then(function(){return resolve(n("6fc7"))}.bind(null,n)).catch(n.oe)},l={mixins:[e.default],components:{SkuAction:s,GoodsAction:c,GoodsActionButton:u,GoodsActionIcon:a,share:d,loading:r},data:function(){return{isLoading:!0,upOption:{use:!1,auto:!1},fields:["id"],isSkuStatus:!1,isShareStatus:!1,images:[],collect:!1,cartCount:0,current:0,selectedGoodsInfo:{},products:{},attribute:[],comments:[],item:{},goods_id:0,url:""}},onLoad:function(o){this.goods_id=o.id;var n=t.getSystemInfoSync()["statusBarHeight"];console.log("status",n)},onShow:function(){var t=this.$storage.getJson("users");this.cartCount=null!=t?t.shop_count:0},onNavigationBarButtonTap:function(t){this.isShareStatus=!this.isShareStatus},methods:{onSwiperChange:function(t){this.current=t.detail.current},downCallback:function(){var t=this;setTimeout((function(){t.loadGoodsData(),t.mescroll.endSuccess(10,!1)}),1200)},triggerDownScroll:function(){this.mescroll.triggerDownScroll()},loadGoodsData:function(){var t=this;this.$http.getGoodsDetail({id:this.goods_id}).then((function(o){t.collect=!!o.data.collect,t.products=o.data.goods,t.attribute=o.data.attr,t.comments=o.data.comments,t.item=o.data.item,t.images=o.data.photo,t.url=t.$config.uni_app_web_url+"goods/view/"+t.goods_id,t.isLoading=!1})).catch((function(t){}))},favorite:function(){var t=this;this.$store.dispatch("usersStatus").then((function(){t.$http.goodsDetailFavorite({id:t.goods_id}).then((function(o){o.status?t.collect=1==o.data:t.$utils.msg(o.info)}))})).catch((function(){t.$storage.set("VUE_REFERER","/goods/view/id/"+t.goods_id),t.$utils.navigateTo("public/login")}))},onChange:function(t){this.current=t},onBuyClicked:function(){var t=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("usersStatus").then((function(){t.$utils.navigateTo("cart/confirm",{id:t.selectedGoodsInfo.id,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"buy"})})).catch((function(){t.$storage.set("VUE_REFERER","/goods/view/id/"+t.goods_id),t.$utils.navigateTo("public/login")})):(this.$utils.msg("请选择规格！"),!1);this.isSkuStatus=!0},onAddCartClicked:function(){var o=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("usersStatus").then((function(){o.$http.goodsDetailAddCart({id:o.selectedGoodsInfo.id,sku_id:o.selectedGoodsInfo.selectedSku.id,num:o.selectedGoodsInfo.num}).then((function(n){o.isShow=!1,n.status?(o.cartCount=n.data.count,o.$store.commit("UPDATECART",n.data.count),o.$utils.msg(n.info),n.data.count>0?t.setTabBarBadge({index:2,text:n.data.count.toString()}):t.removeTabBarBadge({index:2})):o.$utils.msg(n.info)})).catch((function(t){o.$utils.msg("网络出错，请检查网络是否连接")}))})).catch((function(){o.$storage.set("VUE_REFERER","/goods/view/id/"+o.goods_id),o.$utils.navigateTo("public/login")})):(this.$utils.msg("请选择规格！"),!1);this.isSkuStatus=!0}}};o.default=l}).call(this,n("c11b")["default"])},"110c":function(t,o,n){"use strict";n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return s})),n.d(o,"a",(function(){return e}));var e={mescrollBody:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mescroll-uni/components/mescroll-body/mescroll-body")]).then(n.bind(null,"3cec"))},skuAction:function(){return n.e("components/sku-action/sku-action").then(n.bind(null,"06f7"))}},i=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){return t.$utils.navigateTo("comments/view",{id:t.goods_id,type:"goods"})},t.e1=function(o){return t.$utils.switchTab("index/index")},t.e2=function(o){return t.$utils.switchTab("cart/index")})},s=[]},6370:function(t,o,n){"use strict";var e=n("c29a"),i=n.n(e);i.a},c04d:function(t,o,n){"use strict";n.r(o);var e=n("0d60"),i=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(o,t,(function(){return e[t]}))}(s);o["default"]=i.a},c29a:function(t,o,n){},db8e:function(t,o,n){"use strict";(function(t){n("16c8");e(n("66fd"));var o=e(n("f2b2"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("c11b")["createPage"])},f2b2:function(t,o,n){"use strict";n.r(o);var e=n("110c"),i=n("c04d");for(var s in i)"default"!==s&&function(t){n.d(o,t,(function(){return i[t]}))}(s);n("6370");var c,u=n("f0c5"),a=Object(u["a"])(i["default"],e["b"],e["c"],!1,null,"5d48b0d0",null,!1,e["a"],c);o["default"]=a.exports}},[["db8e","common/runtime","common/vendor"]]]);