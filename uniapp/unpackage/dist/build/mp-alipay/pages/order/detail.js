(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/order/detail"],{"1c3d":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={uniSteps:function(){return n.e("components/uni-steps/uni-steps").then(n.bind(null,"16d0"))}},i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"38fa":function(t,e,n){"use strict";(function(t){n("16c8");r(n("66fd"));var e=r(n("c5cd"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("c11b")["createPage"])},5029:function(t,e,n){"use strict";n.r(e);var r=n("7e38"),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},"7e38":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)}))}}var s=function(){n.e("components/tool/info").then(function(){return resolve(n("429c"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/uni-steps/uni-steps").then(function(){return resolve(n("16d0"))}.bind(null,n)).catch(n.oe)},c={components:{MallInfo:s,uniSteps:u},data:function(){return{isError:!1,orderId:0,active:0,stepsOptions:[{title:"待付款"},{title:"待发货"},{title:"待收货"},{title:"待评价"},{title:"己完成"}],payment:"wechat",order:{accept_name:"",address:"",create_time:"",item:[],mobile:"",order_amount:"",order_no:"",pay_status:"",pay_type:"",payable_freight:"",payable_amount:"",promotions:"",real_amount:"",region:"",type:"",users_price:"0.00",order_status:1},providerList:[]}},onLoad:function(e){var n=this;this.isError=!1,this.orderId=e.id,this.$http.getOrderDetail({id:this.orderId}).then((function(t){n.isError=!1,t.status?(n.active=t.data.active,n.order=t.data):n.isError=!0})).catch((function(t){n.isError=!0})),t.getProvider({service:"payment",success:function(t){for(var e=[],r=0;r<t.provider.length;r++)switch(t.provider[r]){case"wxpay":e.push({id:"wechat",name:"微信支付",sort:0});break;case"alipay":e.push({id:"alipay",name:"支付宝",sort:1});break;default:break}n.providerList=e.sort((function(t,e){return t.sort-e.sort}))},fail:function(e){t.showModal({content:"获取支付通道失败",showCancel:!1})}})},onBackPress:function(t){return this.$utils.navigateTo("order/list",{id:1}),!0},methods:{goGoods:function(t){this.$utils.navigateTo("goods/view",{id:t})},selectPayment:function(t){this.payment=t},goPay:function(){var t=this;this.$utils.showLoading(),this.$http.getOrderDetailPayment({order_id:this.orderId,payment_id:this.payment,source:4}).then((function(e){t.$utils.hideLoading(),e.status?t.resultOrderData(e.data):t.$utils.msg(e.info)})).catch((function(e){t.$utils.hideLoading(),t.$utils.msg("网络出错，请检查网络是否连接")}))},resultOrderData:function(e){switch(this.$store.commit("UPDATECART",e.shop_count),e.shop_count>0?t.setTabBarBadge({index:2,text:e.shop_count.toString()}):t.removeTabBarBadge({index:2}),e.pay+""){case"0":this.$utils.redirectTo("order/detail",{id:e.order_id});break;case"1":this.requestPayment(e.result.params,"wxpay",{id:e.order_id});break;case"2":this.requestPayment(e.result.params,"alipay",{id:e.order_id});break;case"99":this.$utils.msg(e.msg);break}},requestPayment:function(e,n,i){var o=this;return a(r.default.mark((function a(){var s;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return t.showModal({content:"获取支付信息失败",showCancel:!1}),r.abrupt("return");case 3:s=o,t.requestPayment({provider:n,orderInfo:e,success:function(e){t.showToast({title:"您己支付成功!",success:function(t){s.$utils.redirectTo("order/detail",i)}})},fail:function(e){t.showModal({content:"支付失败,原因为: "+e.errMsg,showCancel:!1})}});case 5:case"end":return r.stop()}}),a)})))()},confirm:function(){this.$utils.navigateTo("order/confirm_delivery",{id:this.orderId})},refund:function(){this.$utils.navigateTo("order/refund",{id:this.orderId})},evaluate:function(){this.$utils.navigateTo("order/evaluate",{id:this.orderId})},cancel:function(){var t=this;this.$utils.showLoading(),this.$http.getOrderDetailCancel({order_id:this.orderId}).then((function(e){t.$utils.hideLoading(),e.status?(t.$utils.msg(e.info),t.$utils.navigateTo("order/list",{id:1})):t.$utils.msg(e.info)})).catch((function(e){t.$utils.hideLoading(),t.$utils.msg("网络出错，请检查网络是否连接")}))}}};e.default=c}).call(this,n("c11b")["default"])},a6e1:function(t,e,n){},c5cd:function(t,e,n){"use strict";n.r(e);var r=n("1c3d"),i=n("5029");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("fa6b");var a,s=n("f0c5"),u=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"ab2575a8",null,!1,r["a"],a);e["default"]=u.exports},fa6b:function(t,e,n){"use strict";var r=n("a6e1"),i=n.n(r);i.a}},[["38fa","common/runtime","common/vendor"]]]);